# FreeBlackMarket.com Staging Environment
# Copy this file and rename to .env.staging on Railway staging environment

# =============================================================================
# REQUIRED - These must be set for the application to start
# =============================================================================

# Database (Use a separate staging database!)
DATABASE_URL=postgres://user:password@staging-db-host:5432/freeblackmarket_staging

# Security Secrets (Generate unique values for staging)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-staging-jwt-secret-at-least-32-characters
COOKIE_SECRET=your-staging-cookie-secret-at-least-32-chars

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Frontend URLs (use staging subdomains)
STORE_CORS=https://staging.freeblackmarket.com,http://localhost:8000
ADMIN_CORS=https://staging-admin.freeblackmarket.com,http://localhost:5173
VENDOR_CORS=https://staging-vendor.freeblackmarket.com,http://localhost:7000
AUTH_CORS=https://staging.freeblackmarket.com,https://staging-admin.freeblackmarket.com,https://staging-vendor.freeblackmarket.com

# =============================================================================
# OPTIONAL SERVICES
# =============================================================================

# Redis (recommended for staging to mirror production)
REDIS_URL=redis://staging-redis:6379

# Stripe (use TEST mode keys)
STRIPE_API_KEY=sk_test_your_staging_stripe_key
STRIPE_WEBHOOK_SECRET=whsec_your_staging_webhook_secret

# Resend Email (use test domain or sandbox)
RESEND_API_KEY=re_test_your_staging_key
RESEND_FROM_EMAIL=staging@resend.dev

# Algolia (use separate staging index)
ALGOLIA_APP_ID=your-staging-app-id
ALGOLIA_API_KEY=your-staging-admin-key

# =============================================================================
# OBSERVABILITY
# =============================================================================

# OpenTelemetry (enable for staging debugging)
OTEL_ENABLED=true
OTEL_SERVICE_NAME=freeblackmarket-staging
# OTEL_EXPORTER_OTLP_ENDPOINT=https://your-otel-collector

# Sentry Error Tracking (use staging project)
SENTRY_DSN=https://staging-key@sentry.io/staging-project
SENTRY_ENVIRONMENT=staging
SENTRY_SAMPLE_RATE=1.0

# Logging
LOG_LEVEL=debug

# =============================================================================
# FEATURE FLAGS (can test features before production)
# =============================================================================

ENABLE_STELLAR_SETTLEMENT=false
ENABLE_STRIPE_ACH=false

# =============================================================================
# RAILWAY DEPLOYMENT
# =============================================================================

NODE_MEMORY_MB=512
# PostgreSQL SSL is auto-detected for Railway
# DB_POOL_SIZE=10              # Override if needed
# DB_POOL_IDLE_TIMEOUT=30000
# DB_CONNECTION_TIMEOUT=10000

# Startup optimization (set SKIP_SEED=true after first successful seed)
SKIP_SEED=false
SKIP_MIGRATIONS=false

# =============================================================================
# ADMIN CREDENTIALS (for seeding)
# =============================================================================

MEDUSA_ADMIN_EMAIL=staging-admin@freeblackmarket.com
MEDUSA_ADMIN_PASSWORD=staging-secure-password
